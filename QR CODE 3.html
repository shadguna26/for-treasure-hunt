<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Cipher Chase - Problem No. 3</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&family=Rubik:wght@400;700&display=swap" rel="stylesheet">
<style>
body {
    margin: 0;
    padding: 0;
    font-family: 'Rubik', sans-serif;
    background: linear-gradient(135deg, #6a11cb, #2575fc);
    color: #fff;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow-x: hidden;
}
.container {
    width: 90%;
    max-width: 900px;
    background: #ffffffdd;
    color: #333;
    border-radius: 20px;
    padding: 40px;
    box-shadow: 0 12px 30px rgba(0,0,0,0.4);
    text-align: center;
    position: relative;
}
h1 {
    font-size: 2.2em;
    color: #6a11cb;
    margin-bottom: 15px;
    text-shadow: 1px 1px 4px #00000033;
}
p { font-size: 18px; margin-bottom: 20px; }
.code-container {
    margin: 20px 0;
    background: #f0f0f0;
    border-radius: 15px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    padding: 15px;
}
textarea {
    width: 100%;
    height: 220px;
    font-family: 'Roboto Mono', monospace;
    font-size: 16px;
    padding: 15px;
    border-radius: 12px;
    border: 2px solid #6a11cb;
    background: #fff;
    color: #333;
    resize: none;
    transition: border 0.3s;
}
textarea:focus { border: 2px solid #2575fc; outline: none; }
.input-container { margin-top: 20px; }
input[type="text"] {
    width: 100%;
    padding: 12px;
    border-radius: 10px;
    border: 2px solid #2575fc;
    font-size: 16px;
    margin-bottom: 15px;
}
.submit-btn {
    padding: 14px 30px;
    font-size: 18px;
    border: none;
    border-radius: 10px;
    font-weight: bold;
    cursor: pointer;
    background: linear-gradient(135deg, #6a11cb, #2575fc);
    color: #fff;
    box-shadow: 0 6px 15px rgba(0,0,0,0.3);
    transition: transform 0.2s, box-shadow 0.2s;
}
.submit-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0,0,0,0.4); }
.clue, .error {
    padding: 18px;
    border-radius: 12px;
    font-size: 18px;
    margin-top: 20px;
    display: none;
    animation: fadeIn 0.8s ease;
}
.clue { background-color: #d4edda; color: #155724; border: 2px solid #155724; }
.error { background-color: #f8d7da; color: #721c24; border: 2px solid #721c24; }
@keyframes fadeIn { from {opacity: 0; transform: translateY(-10px);} to {opacity:1; transform: translateY(0);} }
.confetti { width: 8px; height: 8px; position: absolute; top: -10px; border-radius: 50%; opacity: 0.9; pointer-events: none; animation-name: fallConfetti; animation-timing-function: linear; }
@keyframes fallConfetti { 0% {transform: translateY(0) rotate(0deg);} 100% {transform: translateY(400px) rotate(720deg);} }
</style>
</head>
<body>
<div class="container">
    <h1>Cipher Chase - Problem No. 3</h1>
    <p>Edit the C code and type the expected output. Once both are correct, your clue will appear with confetti!</p>
    
    <div class="code-container">
        <label for="code"><strong>C Code (editable):</strong></label><br>
        <textarea id="code">
#include <stdio.h>
#include <string.h>
int main() {
    char str[] = "level";
    int len = strlen(str);
    int flag = 0;
    for(int i=0; i<len; i++) {
        if(str[i] != str[len-i]) {
            flag = 1;
            break;
        }
    }
    if(flag == 0)
        printf("Palindrome");
    else
        printf("Not Palindrome");
    return 0;
}
        </textarea>
    </div>

    <div class="input-container">
        <label for="output"><strong>Expected Output:</strong></label>
        <input type="text" id="output" placeholder="Type output here e.g., Palindrome">
        <button class="submit-btn" onclick="checkAnswer()">Submit</button>
    </div>

    <div class="clue" id="clue">
        ✅ Correct! Your next clue: <strong>Look under the Main Stairs for QR #4.</strong>
    </div>

    <div class="error" id="error">
        ❌ Incorrect! Make sure the code is fixed and output is correct.
    </div>
</div>

<script>
function createConfetti() {
    const colors = ["#FF0A54","#FF477E","#FF7096","#FF85A1","#FBB1B7","#F9BEC7","#FAD2E1","#D0F4F8","#A3F7FF","#90E0EF"];
    for(let i=0;i<80;i++){
        const confetti = document.createElement("div");
        confetti.classList.add("confetti");
        confetti.style.left = Math.random()*100 + "%";
        confetti.style.background = colors[Math.floor(Math.random()*colors.length)];
        confetti.style.width = (5 + Math.random()*8) + "px";
        confetti.style.height = confetti.style.width;
        confetti.style.animationDuration = (2 + Math.random()*2) + "s";
        confetti.style.transform = `rotate(${Math.random()*360}deg)`;
        document.body.appendChild(confetti);
        setTimeout(()=>{ confetti.remove(); }, 3000);
    }
}

function checkAnswer() {
    const code = document.getElementById('code').value;
    const output = document.getElementById('output').value.trim();

    // checks for corrected parts:
    const hasIf = /if\s*\(\s*str\[i\]\s*!=\s*str\[len\s*-\s*i\s*-\s*1\]\s*\)/m.test(code);
    const hasPrintf1 = /printf\s*\(\s*"Palindrome"\s*\)\s*;/m.test(code);
    const hasPrintf2 = /printf\s*\(\s*"Not Palindrome"\s*\)\s*;/m.test(code);

    const outputCorrect = (output === "Palindrome");

    const codeCorrect = hasIf && hasPrintf1 && hasPrintf2;

    if(codeCorrect && outputCorrect){
        document.getElementById('clue').style.display = "block";
        document.getElementById('error').style.display = "none";
        createConfetti();
    } else {
        document.getElementById('error').style.display = "block";
        document.getElementById('clue').style.display = "none";
    }
}
</script>
</body>
</html>

